---
title: "ì»¤ìŠ¤í…€ eslint plugin ë§Œë“¤ê¸°"
description: "ì»¤ìŠ¤í…€ eslint ê·œì¹™ì„ ë§Œë“¤ì–´ë³´ê³ , checked-requires-onchange-or-readonlyì„ ì–´ë–»ê²Œ êµ¬ì„±í–ˆëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤."
date: 2023-03-04
tags:
  - ESLint
  - Custom ESLint Plugin
  - ESLint Plugin React
  - Checked Requires Onchange Or Readonly
coverImage: { url: eslint-logo.png, alt: "eslint-logo" }
series:
  - eslint-plugin-reactì—-ê¸°ì—¬í–ˆìŠµë‹ˆë‹¤
---

import { Image } from "astro:assets";
import AstVisualizedImage from "../../assets/ast-visualization.png";
import EslintAppleExec from "../../assets/eslint-plugin-apple-exec.png";

`checked-requires-onchange-or-readonly` ê·œì¹™ê³¼ í•¨ê»˜ ì»¤ìŠ¤í…€ ESlint í”ŒëŸ¬ê·¸ì¸ì„ ì–´ë–»ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## AST(Abstract Syntax Tree)

ë¨¼ì € ASTë¼ëŠ” ê²ƒì— ëŒ€í•´ ì•Œ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
AST, ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ëŠ” ì‰½ê²Œ ë§í•´ ì½”ë“œì˜ ë‹¨ìœ„ í•˜ë‚˜ í•˜ë‚˜ë¥¼ ë…¸ë“œë¡œ ë§Œë“¤ì–´ ê°„ë‹¨í•œ íŠ¸ë¦¬ í˜•íƒœì˜ ë°ì´í„° êµ¬ì¡°ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ ì½”ë“œë¥¼

```javascript
const apple = "delicious";
```

Espreeë¼ëŠ” parserë¡œ ë³€í™˜ í•œ ASTë¡œ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```json
{
  "type": "Program",
  "start": 0,
  "end": 26,
  "range": [0, 26],
  "body": [
    {
      "type": "VariableDeclaration",
      "start": 0,
      "end": 26,
      "range": [0, 26],
      "declarations": [
        {
          "type": "VariableDeclarator",
          "start": 6,
          "end": 25,
          "range": [6, 25],
          "id": {
            "type": "Identifier",
            "start": 6,
            "end": 11,
            "range": [6, 11],
            "name": "apple"
          },
          "init": {
            "type": "Literal",
            "start": 14,
            "end": 25,
            "range": [14, 25],
            "value": "delicious",
            "raw": "'delicious'"
          }
        }
      ],
      "kind": "const"
    }
  ],
  "sourceType": "module"
}
```

ë­”ê°€ ë³µì¡í•´ë³´ì´ì£ ? `type`ì´ë¼ëŠ” í‚¤ë¥¼ ìœ„ì£¼ë¡œ ì‚´í´ë³´ë©´ ëŒ€ì¶© ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- í”„ë¡œê·¸ë¨ ì•ˆì— `const` ë³€ìˆ˜ ì„ ì–¸ì´ ìˆê³ 
- `apple`ì´ë¼ëŠ” ì‹ë³„ìì—
- 'delicious' ë¼ëŠ” ë¬¸ìì—´ì´ í• ë‹¹ë˜ì—ˆë‹¤

ì‹œê°í™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

<div className="flex flex-col items-center">
  <Image src={AstVisualizedImage} alt="ast ì‹œê°í™”" />
  <figcaption class="text-sm">eslint ì˜¤ë¥˜ê°€ ì˜ ë‚˜íƒ€ë‚œë‹¤</figcaption>
</div>

https://astexplorer.net/ ì—ì„œ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ë©´ ë‹¤ì–‘í•œ parserë¥¼ ì‚¬ìš©í•´ ì†ŒìŠ¤ì½”ë“œë¥¼ ASTë¡œ ë³€í™˜í•´ë³¼ ìˆ˜ ìˆìœ¼ë‹ˆ í•œ ë²ˆ ì•„ë¬´ ì½”ë“œë‚˜ ë„£ì–´ í™•ì¸í•´ë³´ì„¸ìš”.
ì—¬ëŸ¬ parserë“¤ ì¤‘ ESLintëŠ” Espreeë¼ëŠ” parserë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  í•©ë‹ˆë‹¤. ì™¸ì—ë„ Esprismaì™€ ê°™ì€ íŒŒì„œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ [ESTree](https://github.com/estree/estree)ì˜ ëª…ì„¸ë¥¼ ë”°ë¥´ëŠ” ASTë¥¼ ë°˜í™˜í•˜ëŠ” [ì»¤ìŠ¤í…€ parser](https://eslint.org/docs/latest/extend/custom-parsers)ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
í˜¹ì‹œë‚˜ ì €ë§Œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì„ ë§Œë“¤ì–´ë³¼ ì¼ì´ ìˆìœ¼ë©´ ì»¤ìŠ¤í…€ parserë¥¼ í•¨ê»˜ ì˜¬ë ¤ë³´ê² ìŠµë‹ˆë‹¤.

ì•„ë¬´íŠ¼ ì´ë ‡ê²Œ íŒŒì‹±ì´ ì™„ë£Œë˜ë©´ ESLintëŠ” ASTë¥¼ ëŒë©° ê·œì¹™ë“¤ì„ ë¦°íŒ…í•©ë‹ˆë‹¤.

## ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ ë§Œë“¤ì–´ë³´ê¸°

í•œ ë²ˆ ê·œì¹™ì„ ë§Œë“¤ì–´ë³¼ê¹Œìš”? ESLint ê³µì‹ í™ˆí˜ì´ì§€ì˜ ì˜ˆì œë¥¼ ì‚´ì§ ë³€ê²½í•´ì„œ, `const apple = `ì— 'apple'ì´ ì•„ë‹Œ ê°’ì´ ì˜¤ë©´, ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ê³  ì´ë¥¼ 'apple'ë¡œ ìˆ˜ì •í•˜ëŠ” ê·œì¹™ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

### ê·œì¹™ ë§Œë“¤ê¸°

í”ŒëŸ¬ê·¸ì¸ì—ëŠ” ì—¬ëŸ¬ ê·œì¹™ì´ ë‹´ê¸¸ ìˆ˜ ìˆìœ¼ë©°, ê° ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ `meta`, `create()`ë¥¼ ê°–ëŠ” ê°ì²´ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤.

```javascript
// apple-must-be-assigned-apple.js
module.exports = {
  // meta ì •ë³´ëŠ” ì´ ê³³ì—
  meta: {
    type: "problem",
    docs: {
      description: 'enforce `const apple to be assigned "apple"`',
    },
    fixable: "code",
  },
  // ì£¼ìš” ë¡œì§ì€ create() ë©”ì„œë“œ ë‚´ì— ì‘ì„±
  create(context) {
    return {
      VariableDeclarator(node) {
        // const ë³€ìˆ˜ ì„ ì–¸ ë…¸ë“œ ì¤‘
        if (node.parent.kind === "const") {
          // ì‹ë³„ì ì´ë¦„ì´ appleì´ê³ 
          if (node.id.type === "Identifier" && node.id.name === "apple") {
            // ì´ˆê¸°í™” ê°’ì´ "apple"ì´ ì•„ë‹ˆë¼ë©´
            if (
              node.init &&
              node.init.type === "Literal" &&
              node.init.value !== "apple"
            ) {
              // ì˜¤ë¥˜ë¥¼ ë³´ê³ í•˜ê³  ìˆ˜ì •
              context.report({
                node,
                message: "const apple must be assigned 'apple'",
                fix(fixer) {
                  return fixer.replaceText(node.init, '"apple"');
                },
              });
            }
          }
        }
      },
    };
  },
};
```

`meta` ì†ì„±ì€ ì´ ê·œì¹™ì˜ ì¢…ë¥˜(ì—ëŸ¬ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ” ë¬¸ì œì¸ì§€, ê¶Œì¥ì‚¬í•­ì¸ì§€ ë“±), ì„¤ëª…, ìˆ˜ì • ê°€ëŠ¥ ì—¬ë¶€ ë“±ì„ ë‹´ì„ ìˆ˜ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.

`create()`ëŠ” ê·œì¹™ì˜ í•µì‹¬ ë¡œì§ì„ ë‹´ì€ ë©”ì„œë“œë¡œ, AST ë…¸ë“œì˜ `type`ë“¤ì„ í‚¤ë¡œ ê°–ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¼ ESLintëŠ” ASTë¥¼ ìˆœíšŒí•˜ë©° í•´ë‹¹ ë…¸ë“œ íƒ€ì…ì„ ë§Œë‚˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì¸ìì—ëŠ” í•´ë‹¹ ë…¸ë“œì— ëŒ€í•œ ì •ë³´ê°€ ìˆëŠ” `context` ê°ì²´ê°€ ë‹´ê²¨ì˜¤ë©°, ìš°ë¦¬ëŠ” ì´ë¥¼ ì´ìš©í•´ ë…¸ë“œì˜ íƒ€ì…, ì†ŒìŠ¤ì½”ë“œ ë“±ì„ í™•ì¸í•˜ê³  ì˜¤ë¥˜ë¥¼ ë³´ê³ (`.report()`)í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ê¹Œ ASTì—ì„œ ë³´ì•˜ë˜ `VariableDeclarator`ê°€ ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆì£ ? ì´ëŠ” `VariableDeclarator` ë…¸ë“œ, ì¦‰ ë³€ìˆ˜ ì„ ì–¸ ë…¸ë“œë¥¼ ë§Œë‚˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” `apple`ì´ë¼ëŠ” ìƒìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œë¥¼ ì°¾ì•„ë‚´ì•¼ í•˜ë¯€ë¡œ ì—¬ê¸°ì— ë¡œì§ì„ ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.

ë‚´ìš©ì€ ë„ˆë¬´ë‚˜ ê°„ë‹¨í•´ì„œ ì½”ë“œì™€ ì£¼ì„ìœ¼ë¡œ ì´í•´ë˜ì‹œë¦¬ë¼ ìƒê°í•©ë‹ˆë‹¤. Rule ê°ì²´ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œê³ ì‹¶ìœ¼ì‹œë‹¤ë©´ ESLint [Rule Structure](https://eslint.org/docs/latest/extend/custom-rules#rule-structure) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ ì½”ë“œ

ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³¼í…ë°ìš”, ESLintì—ì„œëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ `RuleTester`ë¥¼ ì œê³µí•©ë‹ˆë‹¤. `RuleTester`ì—ëŠ” `valid`, `invalid` ì†ì„±ì„ ê°–ëŠ” ê°ì²´ë¥¼ ì „ë‹¬í•˜ë©°, `valid`ì—ëŠ” ê·œì¹™ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ë•Œì˜ ì½”ë“œ, `invalid`ì—ëŠ” ê·œì¹™ì´ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¬ ë•Œì˜ ì½”ë“œë¥¼ ë„£ìŠµë‹ˆë‹¤.

`valid`ì˜ ì½”ë“œê°€ ë¦°íŠ¸ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜, `invalid`ì˜ ì½”ë“œê°€ ë¦°íŠ¸ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤ë©´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•˜ë©° ì—ëŸ¬ë¥¼ ë˜ì§‘ë‹ˆë‹¤.

```javascript
// apple-must-be-assigned-apple.test.js
const { RuleTester } = require("eslint");
const appleRule = require("./apple-must-be-assigned-apple");

const ruleTester = new RuleTester({
  parserOptions: { ecmaVersion: 2015 },
});

// í…ŒìŠ¤íŠ¸ì— ì‹¤íŒ¨í•˜ë©´ ì—ëŸ¬ë¥¼ throw
ruleTester.run("apple-must-be-assigned-apple", appleRule, {
  valid: [
    {
      code: "const apple = 'apple';",
      code: "const apple = 'Apple';",
    },
  ],
  invalid: [
    {
      code: "const apple = 'banana';",
      output: 'const apple = "apple";', // bananaë¥¼ appleë¡œ ìˆ˜ì •
      errors: 1, // ì—ëŸ¬ê°€ 1ê°œ ë°œìƒ
    },
  ],
});
```

ì—ëŸ¬ ì—†ì´ ì˜ ë™ì‘í•œë‹¤ë©´ ê·œì¹™ì„ í•˜ë‚˜ ì™„ì„±í•œ ê²ƒì…ë‹ˆë‹¤.

### pluginìœ¼ë¡œ ë§Œë“¤ê¸°

ì´ì œ ì´ ê·œì¹™ì„ ë‹¤ë¥¸ ê³³ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
// eslint-plugin-apple.js
const rules = {
  "apple-must-be-assigned-apple": require("./apple-must-be-assigned-apple"),
};
module.exports = {
  rules,
  // config, processor ë“± ì¶”ê°€ë¡œ í•„ìš”í•œ ì†ì„±ì´ ìˆë‹¤ë©´ í•¨ê»˜ ì¶”ê°€
};
```

ë¡œì»¬ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì • íŒŒì¼ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

```javascript
// eslint.config.js
const applePlugin = require("./eslint-plugin-apple.js");

module.exports = [
  {
    plugins: {
      apple: applePlugin,
    },
    rules: {
      "apple/apple-must-be-assigned-apple": "error",
    },
  },
];
```

ë¡œì»¬ í”„ë¡œì íŠ¸ì—ì„œ ë°›ì•„ì„œ ìš°ë¦¬ê°€ ë§Œë“  ê·œì¹™ì´ ì •ë§ë¡œ ì˜ ë™ì‘í•˜ëŠ”ì§€ ëˆˆìœ¼ë¡œ í™•ì¸í•´ë´…ì‹œë‹¤.

<Image src={EslintAppleExec} alt="eslint-í„°ë¯¸ë„-ì˜¤ë¥˜" />
<figcaption class="text-sm text-center">eslint ì˜¤ë¥˜ê°€ ì˜ ë‚˜íƒ€ë‚œë‹¤</figcaption>

### npm ë°°í¬

npmì— ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” `package.json`ì— ë°˜ë“œì‹œ `eslint-plugin-`ì˜ ì»¨ë²¤ì…˜ì„ ë”°ë¼ ê³ ìœ í•œ `name`ì„ ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  `main` í•„ë“œì—ëŠ” pluginì˜ ìƒëŒ€ ê²½ë¡œë¥¼, `peerDependencies`ì—ëŠ” `eslint`ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

```json
{
  "name": "eslint-plugin-apple",
  "version": "1.0.0",
  "main": "eslint-plugin-apple.js",
  "peerDependencies": {
    "eslint": ">=8.0.0"
  },
  "keywords": ["eslint", "eslintplugin", "eslint-plugin"]
}
```

ì»¨ë²¤ì…˜ì„ ì˜ ë”°ëë‹¤ë©´, ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” í”„ë¡œì íŠ¸ ì´ë¦„ ë§Œìœ¼ë¡œ pluginì„ ì‰½ê²Œ ì„¤ì • íŒŒì¼ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```json
{
  "plugins": ["apple"],
  "rules": {
    "apple/apple-must-be-assigned-apple": "error"
  }
}
```

[yo](https://www.npmjs.com/package/yo),
[generator-eslint](https://www.npmjs.com/package/generator-eslint) íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸ë“¤ê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ì‰½ê²Œ ìŠ¤ìºí´ë”©í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì‚¬ìš©í•´ë³´ì…”ë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

## checked-requires-onchange-or-readonly ê·œì¹™ ì‚´í´ë³´ê¸°

ì´ì œ ì œê°€ ì¶”ê°€í•œ `checked-requires-onchange-or-readonly` ê·œì¹™ì„ í•œ ë²ˆ ë³¼í…ë°ìš”, ì´ ê·œì¹™ì€ ë¦¬ì•¡íŠ¸ì˜ `input`ì— `checked` ì†ì„±ì´ ì‚¬ìš©ë˜ë©´,

- `onChange`ë‚˜ `readOnly` ì†ì„± ì¤‘ í•˜ë‚˜ê°€ ì¡´ì¬í•´ì•¼ í•˜ë©°
- `defaultChecked`ê°€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ì„œëŠ” ì•ˆëœë‹¤ëŠ” ê·œì¹™ì…ë‹ˆë‹¤.

### eslint-plugin-react

ê·œì¹™ì€ eslint-plugin-react í”ŒëŸ¬ê·¸ì¸ì— ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤. eslint-plugin-reactëŠ” ì½”ì–´ eslint ë£°ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë¦¬ì•¡íŠ¸ì— íŠ¹í™”ëœ ê·œì¹™ì„ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ javascript ë§Œì„ ì§€ì›í•˜ëŠ” eslintì— jsxë¥¼ ì§€ì›í•˜ê²Œë” ë§Œë“¤ì–´ì§„ í”ŒëŸ¬ê·¸ì¸ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.
ê·¸ë ‡ì§€ë§Œ ì½”ì–´ ë£°ê³¼ [ê¸°ë³¸ì ì¸ êµ¬ì¡°](https://eslint.org/docs/latest/contribute/core-rules)ëŠ” ê°™ìŠµë‹ˆë‹¤.

ì¦‰, ì•„ë˜ ë””ë ‰í„°ë¦¬ë“¤ì— ìƒˆë¡œìš´ ê·œì¹™ì— ê´€í•œ ë‚´ìš©ì„ ì¶”ê°€í•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.

- `lib/rules`
- `tests/lib/rules`
- `docs/rules`

### Rule

`lib/rules/checked-requires-onchange-or-readonly.js`ì˜ ì½”ë“œì…ë‹ˆë‹¤.

```javascript
// ... imports ASTUtils, isCreateElement, report, docsUrl, flatMap

const messages = {
  missingProperty:
    "`checked` should be used with either `onChange` or `readOnly`.",
  exclusiveCheckedAttribute:
    "Use either `checked` or `defaultChecked`, but not both.",
};

const targetPropSet = new Set([
  "checked",
  "onChange",
  "readOnly",
  "defaultChecked",
]);

const defaultOptions = {
  ignoreMissingProperties: false, // onChangeë‚˜ readOnlyê°€ ì—†ëŠ” ê²½ìš° ì˜¤ë¥˜ ë¬´ì‹œ
  ignoreExclusiveCheckedAttribute: false, // checkedì™€ defaultCheckedê°€ ê°™ì´ ìˆëŠ” ê²½ìš° ì˜¤ë¥˜ ë¬´ì‹œ
};

// targetPropSetì— í•´ë‹¹í•˜ëŠ” ì†ì„±ë“¤ë§Œ Setìœ¼ë¡œ ì¶”ì¶œ
function extractTargetProps(properties, keyName) {
  return new Set(
    flatMap(properties, (prop) =>
      prop[keyName] && targetPropSet.has(prop[keyName].name)
        ? [prop[keyName].name]
        : [],
    ),
  );
}

module.exports = {
  meta: {
    docs: {
      // ...
    },
    messages,
    schema: [
      {
        additionalProperties: false,
        /**
         * @description rule ì˜µì…˜ì„ ìŠ¤í‚¤ë§ˆë¡œ ì •ì˜
         * @example 'react/checked-requires-onchange-or-readonly': ['error', { ignoreMissingProperties: true, ignoreExclusiveCheckedAttribute: true }]
         */
        properties: {
          ignoreMissingProperties: {
            type: "boolean",
          },
          ignoreExclusiveCheckedAttribute: {
            type: "boolean",
          },
        },
      },
    ],
  },
  create(context) {
    const options = Object.assign({}, defaultOptions, context.options[0]);

    function reportMissingProperty(node) {
      report(
        context,
        messages.missingProperty,
        "missingProperty", // messageIdë¡œ ì‚¬ìš©ë˜ì–´ testì—ì„œ ì‚¬ìš©
        { node },
      );
    }

    function reportExclusiveCheckedAttribute(node) {
      report(
        context,
        messages.exclusiveCheckedAttribute,
        "exclusiveCheckedAttribute",
        { node },
      );
    }

    const checkAttributesAndReport = (node, propSet) => {
      if (!propSet.has("checked")) {
        return;
      }

      if (
        !options.ignoreExclusiveCheckedAttribute &&
        propSet.has("defaultChecked")
      ) {
        reportExclusiveCheckedAttribute(node);
      }

      if (
        !options.ignoreMissingProperties &&
        !(propSet.has("onChange") || propSet.has("readOnly"))
      ) {
        reportMissingProperty(node);
      }
    };

    return {
      // jsxì¼ ë•Œ
      JSXOpeningElement(node) {
        if (ASTUtils.elementType(node) !== "input") {
          return;
        }

        const propSet = extractTargetProps(node.attributes, "name");
        checkAttributesAndReport(node, propSet);
      },
      // createElement()ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ
      CallExpression(node) {
        if (!isCreateElement(node, context)) {
          return;
        }

        const firstArg = node.arguments[0];
        const secondArg = node.arguments[1];
        if (
          !firstArg ||
          firstArg.type !== "Literal" ||
          firstArg.value !== "input"
        ) {
          return;
        }

        if (!secondArg || secondArg.type !== "ObjectExpression") {
          return;
        }

        const propSet = extractTargetProps(secondArg.properties, "key");
        checkAttributesAndReport(node, propSet);
      },
    };
  },
};
```

êµ¬ì¡°ëŠ” ì•ì„œ ì‘ì„±í•œ apple ê·œì¹™ê³¼ ìœ ì‚¬í•´ì„œ ê¸ˆë°© ì´í•´ë˜ì…¨ì„ê²ë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ Input ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ JSXë‚˜ `createElement()`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‘ ê°€ì§€ ê²½ìš°ë¥¼ ê³ ë ¤í•˜ê³ , `input` íƒœê·¸ì¸ ê²½ìš°ì— ëŒ€í•´ì„œë§Œ ê·œì¹™ì„ ì ìš©í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

ì´ ì¤‘ ê²€ì‚¬í•´ì•¼ í•  í‚¤ë“¤ì„ `extractTargetProps()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ëª¨ë‘ setìœ¼ë¡œ ê°€ì ¸ì˜¤ê³ , `checkAttributesAndReport()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì˜¤ë¥˜ë¥¼ ë³´ê³ í•˜ë„ë¡ í•©ë‹ˆë‹¤. eslint-plugin-reactì—ì„œëŠ” ì‚¬ì „ ì •ì˜ëœ `report()` í•¨ìˆ˜ê°€ ìˆìœ¼ë¯€ë¡œ ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì˜¤ë¥˜ë¥¼ ë³´ê³ í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

### Test

í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ë§ˆì°¬ê°€ì§€ë¡œ apple ê·œì¹™ê³¼ ìœ ì‚¬í•œë°ìš”, ì—¬ê¸°ì„œëŠ” ì•ì„œ ê·œì¹™ì—ì„œ ì§€ì •í•´ì¤€ `messageId`ë¥¼ ì‚¬ìš©í•´ ì—ëŸ¬ë¥¼ íŠ¹ì •í–ˆìŠµë‹ˆë‹¤.

```javascript
ruleTester.run("checked-requires-onchange-or-readonly", rule, {
  valid: parsers.all([
    '<input type="checkbox" />',
    '<input type="checkbox" onChange={noop} />',
    '<input type="checkbox" readOnly />',
    "React.createElement('input', { checked: foo, onChange: noop, readOnly: true })",
    {
      code: '<input type="checkbox" checked />',
      options: [{ ignoreMissingProperties: true }], // onChangeë‚˜ readOnlyê°€ ì—†ì–´ë„ í†µê³¼
    },
    {
      code: '<input type="checkbox" onChange={noop} checked defaultChecked />',
      options: [{ ignoreExclusiveCheckedAttribute: true }], // checkedì™€ defaultCheckedê°€ ê°™ì´ ìˆì–´ë„ í†µê³¼
    },
    // ...
  ]),
  invalid: parsers.all([
    // ...
    {
      code: '<input type="checkbox" checked defaultChecked />',
      options: [
        {
          ignoreMissingProperties: false,
          ignoreExclusiveCheckedAttribute: false,
        },
      ],
      errors: [
        { messageId: "exclusiveCheckedAttribute" },
        { messageId: "missingProperty" },
      ],
    },
  ]),
});
```

í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” ëª¨ë“  ìƒí™©ì—ì„œ ì½”ë“œê°€ ì˜ë„ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì»¤ë²„ë¦¬ì§€ë¥¼ ë†’ì´ê³  ê¼¼ê¼¼í•˜ê²Œ ì—¬ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ë„ë¡ í•©ë‹ˆë‹¤.

ê·¸ëŸ°ë°, ì»¤ë²„ë¦¬ì§€ë³´ë‹¤ ì¤‘ìš”í•œ ê²ƒì€ ì˜ë„ë¥¼ ëª…í™•í•˜ê²Œ ë‚˜íƒ€ë‚´ì–´ êµ¬í˜„ ê³¼ì •ì—ì„œ **íœ´ë¨¼ ì—ëŸ¬**ë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì´ë¼ëŠ” ê²ƒì„ ì´ë²ˆì— ì•Œì•˜ìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëª¨ë‘ í†µê³¼í•´ë„ ì™„ì „íˆ ì˜ëª»ëœ ì½”ë“œê°€ ë  ìˆ˜ë„ ìˆë”ë¼êµ¬ìš”!

## ë²„ê·¸ ì´ìŠˆê°€ ì˜¬ë¼ì˜¤ë‹¤

ì–´ëŠ ë‚  ì˜µì…˜ë“¤ì´ [ë°˜ëŒ€ë¡œ ë™ì‘í•œë‹¤ëŠ” ì´ìŠˆ](https://github.com/jsx-eslint/eslint-plugin-react/issues/3711)ê°€ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤. ì—¥? í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëª¨ë‘ í†µê³¼í–ˆëŠ”ë° ì˜ëª»ëœê²Œ ìˆì—ˆë‹¤ê³ ? ê·¸ë ‡ìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ë°˜ëŒ€ë¡œ ì§°ì„ ë¿ë§Œ ì•„ë‹ˆë¼, **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—­ì‹œ ë°˜ëŒ€** ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ë„ë¡ í•´ë²„ë¦° ê²ƒì…ë‹ˆë‹¤.

ì €ëŠ” ìµœì´ˆì— `ignoreMissingProperties`ì™€ `ignoreExclusiveCheckedAttribute`ê°€ `true`ì´ë©´, í•´ë‹¹ ì˜µì…˜ì„ ë¬´ì‹œí•˜ë„ë¡ êµ¬í˜„í•˜ë ¤ í–ˆëŠ”ë°, ì´ê²Œ ì˜ì–´ì— ë¶€ì •í˜•ì´ë¼ í—·ê°ˆë ¸ëŠ”ì§€ ì‹¤ì œë¡œëŠ” `true`ì¼ ë•Œ ì˜µì…˜ì„ ê°•ì œí•˜ë„ë¡ êµ¬í˜„í•´ë²„ë ¸ìŠµë‹ˆë‹¤.
ë©”ì¸í…Œì´ë„ˆ ì¡°ì°¨ ì¸ì§€í•˜ì§€ ëª»í•˜ê³  ê¹œë¹¡ ì†ì„ ì •ë„ì˜€ìŠµë‹ˆë‹¤ğŸ˜‚

í…ŒìŠ¤íŠ¸ì—ì„œë„ ì˜ˆë¥¼ ë“¤ë©´ ì´ëŸ° ì‹ìœ¼ë¡œ ë°˜ëŒ€ë¡œ í…ŒìŠ¤íŠ¸ í•´ë²„ë¦°ê±°ì£ .

```javascript
{
  invalid: parse.all[
    {
      code: '<input type="checkbox" checked defaultChecked />',
      options: [
        {
          ignoreMissingProperties: true,
          ignoreExclusiveCheckedAttribute: true,
        },
      ],
      errors: [
        { messageId: "exclusiveCheckedAttribute" },
        { messageId: "missingProperty" },
      ],
    }
  ];
}
```

í‡´ê·¼ í›„ ë†€ê³ ìˆì—ˆëŠ”ë°, ì´ë©”ì¼ë¡œ ì•Œë¦¼ì´ ì”ëœ© ì™€ìˆëŠ”ê±¸ ë³´ê³  ê·¸ ìë¦¬ì—ì„œ ë…¸íŠ¸ë¶ì„ êº¼ë‚´ ë‹¤ì‹œ ìˆ˜ì •í•´ ì˜¬ë ¸ìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ê°„ë‹¨í•œ ì˜ˆì‹œì™€ ì œê°€ ë§Œë“  ê·œì¹™ì„ í•¨ê»˜ ë³´ë©°, ESLintì˜ ì»¤ìŠ¤í…€ ê·œì¹™ ë° í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“œëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
ê·œì¹™ì„ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³ , ì„¤ëª…í•˜ê¸° ìœ„í•´ ESLintì— ëŒ€í•´ ê³µë¶€í•˜ëŠ” ë™ì•ˆ ESLintì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•  ìˆ˜ ìˆì—ˆê³ , ì‹¤ìˆ˜ë„ í•´ë³´ë©° ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆë˜ êµ‰ì¥íˆ ì¢‹ì€ ê¸°íšŒì˜€ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì´ ê¸€ì„ í†µí•´ ì»¤ìŠ¤í…€ ê·œì¹™ì„ ë§Œë“œëŠ” ë²•ì„ ìƒˆë¡œ ì•Œê²Œë˜ì‹  ë¶„ë“¤ë„ ì§ì ‘ ë§Œë“¤ì–´ë³´ì‹œê³ , ì¢‹ì€ ê·œì¹™ì´ ìˆìœ¼ë©´ ê³µìœ í•´ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
